<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Submodules | My References</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Submodules" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://0.0.0.0:4000/gitref/submodules" />
<meta property="og:url" content="http://0.0.0.0:4000/gitref/submodules" />
<meta property="og:site_name" content="My References" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Submodules" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Submodules","url":"http://0.0.0.0:4000/gitref/submodules"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="My References" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">My References</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Submodules</h1>
  </header>

  <div class="post-content">
    
<h2 id="what-are-submodules">What are submodules</h2>

<p>Submodules allow you to keep a Git repository as a subdirectory of another Git repository.  This lets you clone another repository into your project and keep your commits separate.</p>

<h2 id="working-with-submodules">Working with submodules</h2>

<h3 id="adding-a-submodule-to-your-project">Adding a submodule to your project</h3>

<p>To add a new new submodules use the command below.  By default submodules will add the sub-project into a directory named the same as the repository (DbConnected in the below example).  If you want to specify your own path or directory add that path at the end of the command.  After running this command, in addition to the new directory you will set a <strong>.gitmodules</strong> file added to your repo.  This file is used by people that clone your repo to figure out where your submodules are.  This file is version controlled just like your .gitignore file.</p>

<p>The new directory added by the submodule add command is a special directory in Git (added as 16000 mode meaning its a directory entry in git if viewed via diff).  Git will not track the changes in that directory unless you cd into it.</p>

<p><code class="language-plaintext highlighter-rouge">git submodule add https://github.com/chaconinc/DbConnector</code></p>

<p><strong><em>Note:</em></strong> You need to commit the change of adding a submodule as you would with any other change.</p>

<h3 id="cloning-a-project-with-submodules">Cloning a project with Submodules</h3>

<p>When you clone a project with submodules, by default you get the directories that contain submodules, but none of the files within them yet. You need to run the command <code class="language-plaintext highlighter-rouge">git submodule init</code> to initialize your local configuration file followed by <code class="language-plaintext highlighter-rouge">git submodule update</code> to fetch all the data from that project and check out the appropriate commit listed in your super-project.  You can also combine the commands as in example below.</p>

<p><code class="language-plaintext highlighter-rouge">git submodule update --init</code></p>

<p>You can also pass the <strong>–recurse-submodules</strong> to the git clone command.  This will automatically initialize and update each submodules in the repository including nested submodules.</p>

<h3 id="working-on-a-project-with-submodules">Working on a project with Submodules</h3>

<p>Once you have a copy of a project with submodules in it, you can collaborate with teammates on both the main project and the submodule project.</p>

<h4 id="pulling-in-upstream-changes-from-the-submodule-remote">Pulling in upstream changes from the submodule remote</h4>

<p>The simplest model of using submodules in a project would be if you were simply consuming a sub-project and wanted to get updates from it from time to time but were not actually modifying anything in your checkout</p>

<p>If you want to check for new work in a submodule, you can go into the directory and run git fetch and git merge the upstream branch to update the local code.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd mys_ubmodule_dir
git fetch
git merge origin/master
</code></pre></div></div>

<p>At this point if you go back to the main project and run <code class="language-plaintext highlighter-rouge">git diff --submodules</code> you will see that the submodule was updated and get a list of commits that were added to it.  If you don’t want to type –submodules every time you can make the global config change below.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config --global diff.submodule log
git diff
</code></pre></div></div>

<p>If you commit changes at this point you will lock in the submodule to have this code when other people update.</p>

<p>If you prefer not to manually update and merge you can run the command below.  This will go into your submodule and fetch and update for you.  It will by default assume that you want to fetch and update the default branch of the remote submodule repository.</p>

<p><code class="language-plaintext highlighter-rouge">git submodule update --remote</code></p>

<p>If you want this command to track another branch, you can make the setting in your .gitmodules file if you want everyone to track it.  If you want to just track it locally you can make the setting .git/config</p>

<p>The command below will change the branch for everyone.  If you want it to be just for you leave off the -f argument.</p>

<p><code class="language-plaintext highlighter-rouge">git config -f .gitmodules submodule.DbConnector.branch stable</code></p>

<p>Git will update all of your submodules by default.  If you want it to just update one specify that submodule after the command.</p>

<p><code class="language-plaintext highlighter-rouge">git submodule update --remote</code></p>

<p>If you set the configuration setting status.submodulessummary Git will show you a short summary of changes to your submodules.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git config status.submodulesummary 1
 git status
</code></pre></div></div>

<h4 id="pulling-upstream-changes-from-the-project-remote">Pulling Upstream changes from the project remote</h4>

<p>By default <code class="language-plaintext highlighter-rouge">git pull</code> command recursively fetches submodules changes however it does not update the submodules.  To finalize the update you would need to run git submodules update.  To be ont he safe side you should run submodule update with the –init flag in case the main project commits you just pulled added new submodules, and with the –recursive flag if any submodules have nested submodules.</p>

<p><code class="language-plaintext highlighter-rouge">git submodule update --init --recursive</code></p>

<p>If you want to automate this process, you can add the –recursive-submodules flag to the git pull command.  This will make Git run git submodule update right after the pull, putting the submodules in the correct state.</p>

<p>If you want Git to always pull with –recurse-submodules, you can set the configuration option submodule.recurse to true.</p>

<p>If the upstream main project changed the URL of the submodules you will need to use the command <code class="language-plaintext highlighter-rouge">git submodule sync</code></p>

<h4 id="working-on-a-submodule">Working on a submodule</h4>

<ul>
  <li>In this section we cover making changes to the submodules at the same time as the main project and committing and publishing those changes at the same time.</li>
  <li>If you want your changes to submodules to be tracked you need to take some extra steps.</li>
  <li>If you make a local change to a submodules and run git submodule update –remote –rebase or git submodule update –remote –merge everything should be fine.</li>
  <li>If you forget the –remote and –merge then Git will reset your submodule directory to a detached state.</li>
  <li>If this happens you can still checkout your branch again to get back your changes.</li>
  <li>If you have not committed your changes and run a submodule update that will cause issues.  Git will fetch the changes, but not overwrite the unsaved work in your directory.</li>
  <li>If you made changes with something that conflicts with the upstream Git will tell you when you run the update.</li>
</ul>

<h4 id="publishing-submodule-changes">Publishing submodule changes</h4>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">My References</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">My References</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
