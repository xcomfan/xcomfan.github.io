<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Kubernetes Labels | My References</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Kubernetes Labels" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://0.0.0.0:4000/kubernetes/labels" />
<meta property="og:url" content="http://0.0.0.0:4000/kubernetes/labels" />
<meta property="og:site_name" content="My References" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Kubernetes Labels" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Kubernetes Labels","url":"http://0.0.0.0:4000/kubernetes/labels"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="My References" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">My References</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Kubernetes Labels</h1>
  </header>

  <div class="post-content">
    <h2 id="label-naming-and-values">Label Naming and Values</h2>

<p>Labels are key/value pairs where both the key and value are represented by strings. Label keys can be broken down into two parts: an optional prefix and a name, separated by a slash. The prefix, if specified must be a DNS sub-domain with a 253 character limit. The key name is required and must be shorter than 63 characters. Names must also start and end with an alphanumeric character and permit the use of dashes <code class="language-plaintext highlighter-rouge">-</code>, underscores<code class="language-plaintext highlighter-rouge">_</code> and dots <code class="language-plaintext highlighter-rouge">.</code>. The contents of the label values follow the same rules as for label keys. Below are some examples of label keys and values</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>acme.com/app-version</td>
      <td>1.0.0</td>
    </tr>
    <tr>
      <td>appVersion</td>
      <td>1.0.0</td>
    </tr>
    <tr>
      <td>app.version</td>
      <td>1.0.0</td>
    </tr>
    <tr>
      <td>kubernetes.io/cluster-service</td>
      <td>true</td>
    </tr>
  </tbody>
</table>

<h2 id="labels-in-kubernetes-architecture">Labels in Kubernetes architecture</h2>

<p>Kubernetes is a purposefully decoupled system. There is no hierarchy and all components operate independently. When objects need to be related to each other they are related with labels. For example ReplicaSets which create multiple replicas of a Pod, find the Pods that they are managing via a selector. When you want to restrict network traffic in your cluster, you would use networkPolicy in conjunction with specific labels to identify Pods that should or should not be allowed to communicate with each other. Labels are the glue that holds a Kubernetes application together.</p>

<h2 id="applying-and-removing-labels">Applying and removing labels</h2>

<p>To apply or update a label on a running object use the command similar to <code class="language-plaintext highlighter-rouge">kubectl label deployments alpaca-prod "ver=1"</code> <strong><em>Note:</em></strong> this command only labels the deployment not the objects which the deployment creates. To change those objects you would need to change the template embedded in the deployment.</p>

<p>You can view labels on an object using the <code class="language-plaintext highlighter-rouge">kubectl describe</code> command. You can also use the <code class="language-plaintext highlighter-rouge">--show-labels</code> option in kubectl to see the labels applied to an object. For example <code class="language-plaintext highlighter-rouge">kubectl get pods --show-labels</code></p>

<p>To remove a label use a minus at end of label command specifying a key for example <code class="language-plaintext highlighter-rouge">kubectl label deployments alpaca-prod "env-"</code>. The minus <code class="language-plaintext highlighter-rouge">-</code> at end of label name removes it.</p>

<p>You may see a label called <code class="language-plaintext highlighter-rouge">pod-template-hash</code> when viewing labels. This label is applied by the deployment so it can keep track of which Pods were generated from which template version and allows the deployment to manage updates ina clean way.</p>

<h2 id="label-selectors">Label Selectors</h2>

<p>Label selectors are used to filter Kubernetes objects based on a set of labels. Label selectors are used by both end users and by different types of objects (for example how a ReplicaSet relates to its Pods).</p>

<p>You use the <code class="language-plaintext highlighter-rouge">--selector</code> flag or <code class="language-plaintext highlighter-rouge">-l</code> for short to use label selectors in kubectl. Below are a few examples.</p>

<p>List pods with <code class="language-plaintext highlighter-rouge">ver</code> label set to 2 <code class="language-plaintext highlighter-rouge">kubectl get pods --selector="ver=2"</code></p>

<p>If you specify two selectors separated by a comma only objects that satisfy both will be returned. This is a logical AND operation:</p>

<p><code class="language-plaintext highlighter-rouge">kubectl get pods -l="app=badnicoot,ver-2"</code></p>

<p>You can also ask if a label is one of a set of values. <code class="language-plaintext highlighter-rouge">kubectl get pods -l="app in (alpaca,bandicoot)"</code></p>

<p>We can also check if a label is set or not. <code class="language-plaintext highlighter-rouge">kubectl get deployments -l="canary"</code>. This example we are asking for all deployments where the <code class="language-plaintext highlighter-rouge">canary</code> label is set to anything.</p>

<p>Below is a summary of the Selector operations:</p>

<table>
  <thead>
    <tr>
      <th>Operator</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key=value</td>
      <td>key is set to value</td>
    </tr>
    <tr>
      <td>key!=value</td>
      <td>key is not set to value</td>
    </tr>
    <tr>
      <td>key in (value1, value2)</td>
      <td>key is one of value1 or value2</td>
    </tr>
    <tr>
      <td>key notin (value1, value2)</td>
      <td>key is not one of value1 or value2</td>
    </tr>
    <tr>
      <td>key</td>
      <td>key is set</td>
    </tr>
    <tr>
      <td>!key</td>
      <td>key is not set</td>
    </tr>
  </tbody>
</table>

<p>You can combine positive and negative selectors for example <code class="language-plaintext highlighter-rouge">kubectl get pods -l "ver=2,!canary"</code></p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">My References</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">My References</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
